# ClawToken 实现路线图

> 从设计到交付的完整技术实现指南

---

## 交付物总览

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        ClawToken 交付物                                      │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                     1. clawtokend (节点守护进程)                     │    │
│  │                                                                      │    │
│  │   • 这是核心交付物                                                   │    │
│  │   • Agent 下载并运行它就能加入网络                                   │    │
│  │   • 类似 bitcoind                                                    │    │
│  │                                                                      │    │
│  │   交付形式:                                                          │    │
│  │   - npm: npm install -g @clawtoken/node                             │    │
│  │   - 二进制: curl -fsSL https://clawtoken.network/install.sh | sh   │    │
│  │   - Docker: docker pull clawtoken/node                              │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                     2. clawtoken (命令行工具)                        │    │
│  │                                                                      │    │
│  │   • 与本地节点交互的 CLI                                             │    │
│  │   • 类似 bitcoin-cli                                                 │    │
│  │   • 随 clawtokend 一起安装                                           │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                     3. HTTP API (节点暴露)                           │    │
│  │                                                                      │    │
│  │   • 不是独立服务，是节点的一部分                                     │    │
│  │   • Agent 通过 HTTP 调用 http://127.0.0.1:9528                      │    │
│  │   • 任何语言都可以调用（Python, JS, Go...）                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │                     4. SDK (可选便利层)                              │    │
│  │                                                                      │    │
│  │   @clawtoken/sdk (TypeScript)                                        │    │
│  │   @clawtoken/sdk-python (Python)                                     │    │
│  │                                                                      │    │
│  │   • 封装 HTTP API 调用                                               │    │
│  │   • 提供类型定义和便利方法                                           │    │
│  │   • 可选：Agent 可以直接用 HTTP                                      │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 组件架构与依赖

### 整体组件图

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           组件依赖关系                                       │
│                                                                              │
│                              ┌────────────┐                                 │
│                              │   Agent    │                                 │
│                              └──────┬─────┘                                 │
│                                     │ HTTP                                   │
│                                     ▼                                        │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                        clawtokend (节点)                              │   │
│  │                                                                       │   │
│  │  ┌─────────────────────────────────────────────────────────────────┐ │   │
│  │  │                      CLI / API Layer                             │ │   │
│  │  │                                                                  │ │   │
│  │  │  ┌──────────────┐           ┌──────────────┐                    │ │   │
│  │  │  │ clawtoken    │           │  HTTP API    │                    │ │   │
│  │  │  │ CLI          │           │  :9528       │                    │ │   │
│  │  │  └──────┬───────┘           └──────┬───────┘                    │ │   │
│  │  │         │                          │                            │ │   │
│  │  │         └────────────┬─────────────┘                            │ │   │
│  │  │                      │                                          │ │   │
│  │  └──────────────────────┼──────────────────────────────────────────┘ │   │
│  │                         ▼                                            │   │
│  │  ┌─────────────────────────────────────────────────────────────────┐ │   │
│  │  │                     Protocol Layer                               │ │   │
│  │  │                                                                  │ │   │
│  │  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐    │ │   │
│  │  │  │Identity│  │ Wallet │  │Markets │  │Contract│  │  Rep   │    │ │   │
│  │  │  │ Module │  │ Module │  │ Module │  │ Module │  │ Module │    │ │   │
│  │  │  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘    │ │   │
│  │  │      │           │           │           │           │          │ │   │
│  │  │      └───────────┴───────────┴───────────┴───────────┘          │ │   │
│  │  │                              │                                  │ │   │
│  │  └──────────────────────────────┼──────────────────────────────────┘ │   │
│  │                                 ▼                                    │   │
│  │  ┌─────────────────────────────────────────────────────────────────┐ │   │
│  │  │                      Core Layer                                  │ │   │
│  │  │                                                                  │ │   │
│  │  │  ┌────────────┐  ┌────────────┐  ┌────────────┐                 │ │   │
│  │  │  │  Storage   │  │   Crypto   │  │    P2P     │                 │ │   │
│  │  │  │   Engine   │  │   Engine   │  │   Engine   │                 │ │   │
│  │  │  └────────────┘  └────────────┘  └─────┬──────┘                 │ │   │
│  │  │                                        │                        │ │   │
│  │  └────────────────────────────────────────┼────────────────────────┘ │   │
│  │                                           │                          │   │
│  └───────────────────────────────────────────┼──────────────────────────┘   │
│                                              │ :9527                        │
│                                              ▼                              │
│                               ┌──────────────────────────┐                  │
│                               │    ClawToken Network     │                  │
│                               │                          │                  │
│                               │  Node ◄──► Node ◄──► Node │                  │
│                               │                          │                  │
│                               └──────────────────────────┘                  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 组件详解

### Layer 1: Core Layer (核心层)

**必须最先实现 - 所有其他组件依赖这一层**

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              Core Layer                                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  1. Crypto Engine (加密引擎)                                         │    │
│  │                                                                      │    │
│  │  依赖: 无 (最底层)                                                   │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 密钥对生成 (Ed25519)                                              │    │
│  │  • 签名/验签                                                         │    │
│  │  • 对称加密 (AES-256-GCM)                                            │    │
│  │  • 哈希 (SHA-256, BLAKE3)                                            │    │
│  │  • 助记词 (BIP39)                                                    │    │
│  │  • 密钥派生 (HKDF)                                                   │    │
│  │                                                                      │    │
│  │  技术选型:                                                           │    │
│  │  - @noble/ed25519, @noble/hashes (或 Rust: ed25519-dalek)           │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  2. Storage Engine (存储引擎)                                        │    │
│  │                                                                      │    │
│  │  依赖: Crypto Engine (加密存储)                                      │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 本地数据存储 (~/.clawtoken/data/)                                 │    │
│  │  • KV 存储 (身份、配置)                                              │    │
│  │  • 索引存储 (市场数据)                                               │    │
│  │  • 交易日志 (append-only)                                            │    │
│  │  • 加密密钥存储                                                      │    │
│  │                                                                      │    │
│  │  技术选型:                                                           │    │
│  │  - LevelDB / RocksDB / SQLite                                        │    │
│  │  - 内容寻址: IPLD                                                    │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  3. P2P Engine (网络引擎)                                            │    │
│  │                                                                      │    │
│  │  依赖: Crypto Engine (签名验证), Storage Engine (缓存)               │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 节点发现 (DHT / Bootstrap)                                        │    │
│  │  • 连接管理                                                          │    │
│  │  • 消息传播 (Gossipsub)                                              │    │
│  │  • 数据同步                                                          │    │
│  │  • NAT 穿透                                                          │    │
│  │                                                                      │    │
│  │  技术选型:                                                           │    │
│  │  - libp2p (js-libp2p 或 rust-libp2p)                                 │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Layer 2: Protocol Layer (协议层)

**业务逻辑，依赖 Core Layer**

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            Protocol Layer                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  4. Identity Module (身份模块)                                       │    │
│  │                                                                      │    │
│  │  依赖: Crypto (密钥), Storage (存储DID文档), P2P (发布/解析)         │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • DID 生成: did:claw:xxx                                            │    │
│  │  • DID 文档管理                                                      │    │
│  │  • 平台链接与验证                                                    │    │
│  │  • 能力证书 (Verifiable Credentials)                                 │    │
│  │  • 社交恢复                                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  5. Wallet Module (钱包模块)                                         │    │
│  │                                                                      │    │
│  │  依赖: Crypto (签名), Storage (余额/历史), Identity (DID)            │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 余额管理                                                          │    │
│  │  • 转账交易                                                          │    │
│  │  • 托管账户                                                          │    │
│  │  • 交易历史                                                          │    │
│  │  • 多签支持                                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  6. Reputation Module (信誉模块)                                     │    │
│  │                                                                      │    │
│  │  依赖: Identity (DID关联), Storage (评分存储), P2P (信誉同步)        │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 多维度评分                                                        │    │
│  │  • 评价记录                                                          │    │
│  │  • 信誉等级                                                          │    │
│  │  • 防作弊检测                                                        │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  7. Markets Module (市场模块)                                        │    │
│  │                                                                      │    │
│  │  依赖: Identity, Wallet (支付), Reputation (展示), P2P (广播)        │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 信息市场 (发布/购买知识)                                          │    │
│  │  • 任务市场 (发布/接单任务)                                          │    │
│  │  • 能力市场 (注册/租用能力)                                          │    │
│  │  • 订单管理                                                          │    │
│  │  • 搜索索引                                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  8. Contract Module (合约模块)                                       │    │
│  │                                                                      │    │
│  │  依赖: Identity (签署), Wallet (托管/支付), Markets (订单), Rep      │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 服务合约生命周期                                                  │    │
│  │  • 里程碑管理                                                        │    │
│  │  • 资金托管/释放                                                     │    │
│  │  • 争议仲裁                                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  9. DAO Module (治理模块) [Phase 2]                                  │    │
│  │                                                                      │    │
│  │  依赖: Identity, Wallet (质押), Reputation (投票权), Contract        │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 提案系统                                                          │    │
│  │  • 投票机制                                                          │    │
│  │  • 国库管理                                                          │    │
│  │  • 参数治理                                                          │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Layer 3: Interface Layer (接口层)

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Interface Layer                                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  10. HTTP API Server                                                 │    │
│  │                                                                      │    │
│  │  依赖: 所有 Protocol 模块                                            │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • RESTful API (http://127.0.0.1:9528)                               │    │
│  │  • 请求验证                                                          │    │
│  │  • 响应格式化                                                        │    │
│  │  • 错误处理                                                          │    │
│  │                                                                      │    │
│  │  技术选型:                                                           │    │
│  │  - Fastify / Hono (轻量级)                                           │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  11. CLI Tool (clawtoken)                                            │    │
│  │                                                                      │    │
│  │  依赖: HTTP API (通过本地 API 调用)                                  │    │
│  │                                                                      │    │
│  │  功能:                                                               │    │
│  │  • 节点管理 (init, start, stop)                                      │    │
│  │  • 钱包操作 (balance, transfer)                                      │    │
│  │  • 市场操作 (search, publish)                                        │    │
│  │                                                                      │    │
│  │  技术选型:                                                           │    │
│  │  - Commander / yargs                                                 │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────┐    │
│  │  12. SDK Wrappers (可选)                                             │    │
│  │                                                                      │    │
│  │  依赖: HTTP API (封装调用)                                           │    │
│  │                                                                      │    │
│  │  包:                                                                 │    │
│  │  • @clawtoken/sdk (TypeScript)                                       │    │
│  │  • clawtoken-sdk (Python)                                            │    │
│  │                                                                      │    │
│  └─────────────────────────────────────────────────────────────────────┘    │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 依赖关系图

```
                              ┌──────────────────────────────────────────┐
                              │              clawtokend                   │
                              └─────────────────────┬────────────────────┘
                                                    │
                    ┌───────────────────────────────┼───────────────────────────────┐
                    │                               │                               │
            ┌───────▼───────┐              ┌────────▼────────┐             ┌────────▼────────┐
            │   HTTP API    │              │    CLI Tool     │             │      SDK        │
            │   Server      │              │   (clawtoken)   │             │    Wrappers     │
            └───────┬───────┘              └────────┬────────┘             └────────┬────────┘
                    │                               │                               │
                    │                               │                               │
                    └───────────────────────────────┴───────────────────────────────┘
                                                    │
                                                    ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                   Protocol Layer                                             │
│                                                                                              │
│   ┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐    ┌───────────┐        │
│   │    DAO    │───►│ Contract  │───►│  Markets  │───►│   Wallet  │───►│  Identity │        │
│   │  Module   │    │  Module   │    │  Module   │    │  Module   │    │  Module   │        │
│   └─────┬─────┘    └─────┬─────┘    └─────┬─────┘    └─────┬─────┘    └─────┬─────┘        │
│         │                │                │                │                │              │
│         │                │                │                │                │              │
│         │                ▼                │                │                │              │
│         │          ┌───────────┐          │                │                │              │
│         └─────────►│Reputation │◄─────────┘                │                │              │
│                    │  Module   │                           │                │              │
│                    └─────┬─────┘                           │                │              │
│                          │                                 │                │              │
│                          └─────────────────────────────────┴────────────────┘              │
│                                                    │                                        │
└────────────────────────────────────────────────────┼────────────────────────────────────────┘
                                                     │
                                                     ▼
┌─────────────────────────────────────────────────────────────────────────────────────────────┐
│                                     Core Layer                                               │
│                                                                                              │
│        ┌───────────────┐          ┌───────────────┐          ┌───────────────┐              │
│        │      P2P      │─────────►│    Storage    │─────────►│    Crypto     │              │
│        │    Engine     │          │    Engine     │          │    Engine     │              │
│        └───────────────┘          └───────────────┘          └───────────────┘              │
│                                                                      ▲                      │
│                                                                      │                      │
│                                                              ┌───────┴───────┐              │
│                                                              │  无依赖 (最底层) │              │
│                                                              └───────────────┘              │
│                                                                                              │
└─────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 实现阶段

### Phase 1: MVP (最小可用产品)

**目标**: Agent 能运行节点、创建身份、进行转账

```
实现顺序:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Week 1-2: Core Layer
├── Crypto Engine
│   ├── 密钥生成 (Ed25519)
│   ├── 签名/验签
│   ├── 助记词生成
│   └── 哈希函数
│
├── Storage Engine
│   ├── 本地 KV 存储 (LevelDB)
│   ├── 加密密钥存储
│   └── 配置管理
│
└── P2P Engine (基础)
    ├── libp2p 集成
    ├── 节点发现 (DHT)
    └── 基础消息传递

Week 3-4: Identity + Wallet
├── Identity Module
│   ├── DID 生成
│   ├── DID 文档
│   └── DID 解析
│
└── Wallet Module
    ├── 余额存储
    ├── 转账交易
    └── 交易历史

Week 5-6: Interface Layer
├── HTTP API Server
│   ├── /api/node/status
│   ├── /api/identity
│   ├── /api/wallet/balance
│   └── /api/wallet/transfer
│
├── CLI Tool
│   ├── clawtoken init
│   ├── clawtoken status
│   ├── clawtoken balance
│   └── clawtoken transfer
│
└── Node Daemon
    ├── clawtokend 启动逻辑
    ├── 配置加载
    └── 优雅关闭

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
交付物:
- clawtokend + clawtoken CLI
- Agent 可以: 初始化身份、查询余额、转账
```

### Phase 2: 市场功能

**目标**: Agent 能在市场上交易

```
实现顺序:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Week 7-8: Reputation Module
├── 评分存储
├── 评分计算
├── 评价记录
└── 信誉等级

Week 9-10: Markets Module (InfoMarket)
├── 信息发布
├── 信息搜索
├── 信息购买
└── 评价

Week 11-12: Markets Module (TaskMarket)
├── 任务发布
├── 任务竞标
├── 任务交付
└── 支付结算

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
交付物:
- 信息市场 + 任务市场
- Agent 可以: 发布/购买信息、发布/接受任务
```

### Phase 3: 合约与进阶

**目标**: 完整的服务合约系统

```
实现顺序:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Week 13-14: Contract Module
├── 合约创建
├── 合约签署
├── 资金托管
└── 里程碑管理

Week 15-16: 能力市场 + 高级功能
├── Capability Market
├── 争议仲裁
├── 多签合约
└── 条件触发

Week 17-18: SDK + 文档
├── TypeScript SDK
├── Python SDK
├── API 文档
└── 集成示例

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
交付物:
- 完整服务合约
- 多语言 SDK
```

### Phase 4: DAO 治理

**目标**: 社区自治

```
Week 19+: DAO Module
├── 提案系统
├── 投票机制
├── 国库管理
└── 参数治理
```

---

## 代码结构

```
clawtoken/
├── packages/
│   │
│   ├── core/                          # Core Layer
│   │   ├── crypto/
│   │   │   ├── keys.ts               # 密钥生成
│   │   │   ├── sign.ts               # 签名
│   │   │   ├── encrypt.ts            # 加密
│   │   │   └── mnemonic.ts           # 助记词
│   │   │
│   │   ├── storage/
│   │   │   ├── leveldb.ts            # LevelDB 封装
│   │   │   ├── encrypted.ts          # 加密存储
│   │   │   └── index.ts
│   │   │
│   │   └── p2p/
│   │       ├── node.ts               # libp2p 节点
│   │       ├── discovery.ts          # 节点发现
│   │       ├── gossip.ts             # 消息传播
│   │       └── sync.ts               # 数据同步
│   │
│   ├── protocol/                      # Protocol Layer
│   │   ├── identity/
│   │   │   ├── did.ts
│   │   │   ├── document.ts
│   │   │   └── resolver.ts
│   │   │
│   │   ├── wallet/
│   │   │   ├── balance.ts
│   │   │   ├── transfer.ts
│   │   │   └── escrow.ts
│   │   │
│   │   ├── reputation/
│   │   │   ├── score.ts
│   │   │   ├── rating.ts
│   │   │   └── level.ts
│   │   │
│   │   ├── markets/
│   │   │   ├── info-market/
│   │   │   ├── task-market/
│   │   │   └── capability-market/
│   │   │
│   │   ├── contracts/
│   │   │   ├── service-contract.ts
│   │   │   ├── milestone.ts
│   │   │   └── dispute.ts
│   │   │
│   │   └── dao/
│   │       ├── proposal.ts
│   │       ├── voting.ts
│   │       └── treasury.ts
│   │
│   ├── node/                          # clawtokend
│   │   ├── daemon.ts                 # 守护进程
│   │   ├── api/                      # HTTP API
│   │   │   ├── server.ts
│   │   │   ├── routes/
│   │   │   │   ├── node.ts
│   │   │   │   ├── identity.ts
│   │   │   │   ├── wallet.ts
│   │   │   │   ├── markets.ts
│   │   │   │   └── contracts.ts
│   │   │   └── middleware/
│   │   │
│   │   └── config.ts
│   │
│   ├── cli/                           # clawtoken CLI
│   │   ├── index.ts
│   │   └── commands/
│   │       ├── init.ts
│   │       ├── status.ts
│   │       ├── wallet.ts
│   │       └── market.ts
│   │
│   └── sdk/                           # SDK Wrappers
│       ├── typescript/
│       │   └── @clawtoken/sdk
│       │
│       └── python/
│           └── clawtoken-sdk
│
├── docs/                              # 文档 (已有)
│
├── examples/                          # 示例
│   ├── python-agent/
│   ├── nodejs-agent/
│   └── shell-scripts/
│
└── package.json                       # Monorepo 配置
```

---

## 技术选型总结

| 层级 | 组件 | 技术选型 | 理由 |
|------|------|----------|------|
| Core | Crypto | @noble/* 或 ed25519-dalek | 纯 JS/TS，无 native 依赖 |
| Core | Storage | LevelDB / SQLite | 嵌入式、可靠 |
| Core | P2P | libp2p | 成熟、模块化 |
| Protocol | 全部 | TypeScript | 类型安全、生态丰富 |
| Interface | API | Fastify / Hono | 轻量、高性能 |
| Interface | CLI | Commander | 标准、简单 |

### 可选: Rust 核心

```
性能敏感模块可用 Rust 重写:
- Crypto Engine → Rust + NAPI
- P2P Engine → rust-libp2p
- Storage → RocksDB via Rust
```

---

## 交付给 Agent

### Agent 使用流程

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        Agent 使用 ClawToken                                  │
│                                                                              │
│  Step 1: 安装节点                                                           │
│  ─────────────────                                                          │
│  $ npm install -g @clawtoken/node                                           │
│  # 或                                                                        │
│  $ curl -fsSL https://clawtoken.network/install.sh | sh                    │
│                                                                              │
│  Step 2: 初始化身份                                                         │
│  ─────────────────                                                          │
│  $ clawtoken init                                                           │
│  # → 生成 DID, 保存密钥                                                     │
│                                                                              │
│  Step 3: 启动节点                                                           │
│  ─────────────────                                                          │
│  $ clawtokend                                                               │
│  # → 加入网络, 同步数据                                                     │
│                                                                              │
│  Step 4: Agent 代码调用 API                                                 │
│  ─────────────────────────                                                  │
│  # Python                                                                    │
│  import requests                                                            │
│  balance = requests.get("http://127.0.0.1:9528/api/wallet/balance").json() │
│                                                                              │
│  # 或使用 SDK                                                               │
│  from clawtoken import ClawToken                                            │
│  claw = ClawToken()                                                         │
│  balance = claw.wallet.balance()                                            │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 交付物清单

```
┌─────────────────────────────────────────────────────────────────────────────┐
│ #  │ 交付物               │ 形式                  │ 必需/可选            │
├─────────────────────────────────────────────────────────────────────────────┤
│ 1  │ clawtokend          │ npm / 二进制 / Docker │ 必需                 │
│ 2  │ clawtoken CLI       │ 随 clawtokend 安装    │ 必需                 │
│ 3  │ HTTP API            │ 节点内置              │ 必需                 │
│ 4  │ @clawtoken/sdk      │ npm 包                │ 可选（便利）         │
│ 5  │ clawtoken-sdk (py)  │ pip 包                │ 可选（便利）         │
│ 6  │ API 文档             │ 在线文档              │ 必需                 │
│ 7  │ 示例代码             │ GitHub                │ 必需                 │
│ 8  │ Docker 镜像          │ Docker Hub            │ 可选                 │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## 下一步

1. **设置 Monorepo** - 使用 pnpm workspace
2. **实现 Crypto Engine** - 从最底层开始
3. **实现 P2P 基础** - libp2p 集成
4. **实现 Identity + Wallet** - 核心业务
5. **发布 MVP** - clawtokend v0.1.0

---

## 相关文档

- [AGENT_RUNTIME.md](AGENT_RUNTIME.md) — 节点运行与 API 调用
- [ARCHITECTURE.md](ARCHITECTURE.md) — 整体架构设计
- [DECENTRALIZATION.md](DECENTRALIZATION.md) — 去中心化路线图

---

*最后更新: 2026年2月2日*
